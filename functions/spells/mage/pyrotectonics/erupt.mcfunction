
#### First proc: dmg
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run scoreboard players add @e[tag=enemy,distance=..1.9] dmg 13
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] run function code:units/health/damage

execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s as @e[tag=enemy,distance=..1.9] run tag @s add pyrotectonicsHit
execute if entity @e[tag=pyrotectonicsHit] run function code:spells/mage/pyrotectonics/hitenemy



#### VSFX
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run particle dust_color_transition 1 0 0 2.7 1 .7 0 ^ ^ ^1.5 0 0 0 1 1
execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run tp @s ~ ~ ~ ~20 ~

execute as @e[tag=pyrotectonics_erupt,scores={life=1}] at @s run playsound entity.blaze.shoot ambient @a ~ ~ ~ .5 .8

execute as @e[tag=pyrotectonics_erupt,scores={life=1..}] at @s run summon area_effect_cloud ~ ~-1 ~ {Particle:flame,Duration:6s,Radius:1.5}
execute as @e[tag=pyrotectonics_erupt,scores={life=1..}] at @s run particle flame ~ ~ ~ .5 .3 .5 0 7
execute as @e[tag=pyrotectonics_erupt,scores={life=1..}] at @s run particle smoke ~ ~ ~ .5 .3 .5 0.2 5
execute as @e[tag=pyrotectonics_erupt,scores={life=1..}] at @s run particle dust 1 .2 0 1.5 ~ ~ ~ .5 .4 .5 0.2 9
execute as @e[tag=pyrotectonics_erupt,scores={life=1..}] at @s run tp @s ~ ~.35 ~

execute as @e[tag=pyrotectonics_erupt,scores={life=1..}] at @s run summon area_effect_cloud ~ ~-1 ~ {Particle:flame,Duration:6s,Radius:1.5}
execute as @e[tag=pyrotectonics_erupt,scores={life=1..}] at @s run particle flame ~ ~ ~ .5 .3 .5 0 7
execute as @e[tag=pyrotectonics_erupt,scores={life=1..}] at @s run particle smoke ~ ~ ~ .5 .3 .5 0.2 5
execute as @e[tag=pyrotectonics_erupt,scores={life=1..}] at @s run particle dust 1 .2 0 1.5 ~ ~ ~ .5 .4 .5 0.2 9
execute as @e[tag=pyrotectonics_erupt,scores={life=1..}] at @s run tp @s ~ ~.35 ~



###### Death
kill @e[tag=pyrotectonics_erupt,scores={life=3..}]
